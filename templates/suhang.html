<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>L.I.T.E | ìˆ˜í–‰í‰ê°€</title>
    <link rel="stylesheet" href="lite_hackathon.css" />
  </head>
  <body>
    <!-- ìƒë‹¨ í—¤ë” -->
    <header class="header" role="banner">
      <button class="icon-btn" onclick="history.back()" aria-label="ë’¤ë¡œê°€ê¸°">
        <!-- Back Icon -->
        <svg width="22" height="22" viewBox="0 0 24 24" aria-hidden="true">
          <path
            d="M15 18l-6-6 6-6"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
          />
        </svg>
      </button>
      <div class="logo">ğŸ“ ìˆ˜í–‰í‰ê°€</div>
      <div style="width: 40px"></div>
    </header>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <main class="container" role="main">
      <section class="task-section">
        <h2>ìˆ˜í–‰í‰ê°€ ì¼ì •í‘œ</h2>

        <!-- ìˆ˜í–‰í‰ê°€ ë“±ë¡ -->
        <form id="taskForm" class="task-form">
          <input
            type="text"
            id="subject"
            placeholder="ê³¼ëª©ëª… (ì˜ˆ: ìˆ˜í•™)"
            required
          />
          <input type="date" id="date" required />
          <input
            type="text"
            id="desc"
            placeholder="ë‚´ìš© ë˜ëŠ” ì¤€ë¹„ë¬¼"
            required
          />
          <button type="submit">ì¶”ê°€í•˜ê¸°</button>
        </form>

        <!-- ìˆ˜í–‰í‰ê°€ ê²€ìƒ‰ -->
        <input
          type="search"
          id="searchTask"
          placeholder="ê³¼ëª© ë˜ëŠ” ë‚´ìš© ê²€ìƒ‰..."
          autocomplete="off"
        />

        <!-- í‰ê°€ ëª©ë¡ -->
        <ul id="taskList" class="task-list"></ul>
      </section>
    </main>

    <script>
      // ë¡œì»¬ìŠ¤í† ë¦¬ì§€ì— ì €ì¥ë  ìˆ˜í–‰í‰ê°€ ë°°ì—´
      let tasks = JSON.parse(localStorage.getItem('tasks')) || [];

      const form = document.getElementById('taskForm');
      const list = document.getElementById('taskList');
      const search = document.getElementById('searchTask');

      // ìˆ˜í–‰í‰ê°€ ë Œë”ë§ í•¨ìˆ˜
      function renderTasks(filter = '') {
        list.innerHTML = '';
        const filtered = tasks.filter(
          (t) => t.subject.includes(filter) || t.desc.includes(filter)
        );

        filtered.forEach((task, i) => {
          const li = document.createElement('li');
          li.innerHTML = `
          <strong>${task.subject}</strong> â€” ${task.desc} 
          <span class="date">(${task.date})</span>
          <button class="remove-btn" data-index="${i}">ì‚­ì œ</button>
        `;
          list.appendChild(li);
        });
      }

      // ì¶”ê°€ ì´ë²¤íŠ¸
      form.addEventListener('submit', (e) => {
        e.preventDefault();
        const newTask = {
          subject: subject.value.trim(),
          date: date.value,
          desc: desc.value.trim(),
        };
        tasks.push(newTask);
        localStorage.setItem('tasks', JSON.stringify(tasks));
        renderTasks();
        form.reset();
      });

      // ì‚­ì œ ì´ë²¤íŠ¸
      list.addEventListener('click', (e) => {
        if (e.target.classList.contains('remove-btn')) {
          const index = e.target.dataset.index;
          tasks.splice(index, 1);
          localStorage.setItem('tasks', JSON.stringify(tasks));
          renderTasks();
        }
      });

      // ê²€ìƒ‰ ì´ë²¤íŠ¸
      search.addEventListener('input', (e) =>
        renderTasks(e.target.value.trim())
      );

      // í˜ì´ì§€ ë¡œë“œì‹œ ì´ˆê¸° ë Œë”
      renderTasks();
    </script>

    <style>
      /* ìˆ˜í–‰í‰ê°€ ì „ìš© ìŠ¤íƒ€ì¼ */
      .task-section {
        max-width: 600px;
        margin: 2rem auto;
        background: rgba(255, 255, 255, 0.05);
        padding: 1.5rem;
        border-radius: 12px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
      }
      .task-form {
        display: flex;
        flex-wrap: wrap;
        gap: 0.5rem;
        margin-bottom: 1rem;
      }
      .task-form input,
      .task-form button {
        flex: 1;
        padding: 0.5rem;
        border-radius: 6px;
        border: none;
      }
      .task-list {
        list-style: none;
        padding: 0;
      }
      .task-list li {
        background: rgba(255, 255, 255, 0.08);
        margin-bottom: 0.4rem;
        padding: 0.6rem;
        border-radius: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .task-list .date {
        color: #ccc;
        font-size: 0.85rem;
        margin-left: 0.4rem;
      }
      .remove-btn {
        background: crimson;
        color: white;
        border: none;
        border-radius: 4px;
        padding: 0.3rem 0.6rem;
        cursor: pointer;
      }
    </style>
  </body>
</html>
